为了确保程序执行的一致性，javascript 选择只用一个主线程来执行代码

先执行 当前调用栈中的同步代码（一个宏任务）；
调用栈为空后去检查是否有异步任务（微任务）需要执行；
如果有则 执行完当前异步代码（当前宏任务中微任务队列里的所有微任务），
再之后就是 从消息队列中取出下一个宏任务 去执行（重新维护一个调用栈），然后开始新一轮的 Event Lopp。
然后不同版本的 Node.js 的一个 Event Loop 区别：

如果是 Node 10 及其之前版本：宏任务队列当中有几个宏任务，是要等到宏任务队列当中的所有宏任务全部执行完毕才会去执行微队列当中的微任务。
如果是 Node 11 及之后版本：一旦执行一个阶段里对应宏队列当中的一个宏任务(setTimeout，setInterval 和 setImmediate 三者其中之一，不包括 I/O)就立刻执行微任务队列，执行完微队列当中的所有微任务再回到刚才的宏队列执行下一个宏任务。这就 跟浏览器端运行一致 了。
